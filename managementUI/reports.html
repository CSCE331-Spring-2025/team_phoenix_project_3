<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phoenix Manager</title>
    <link rel="stylesheet" href="managerStyle.css">
</head>
<body>
    <header>
        <div class="header-content">
            <img src="images/logo.png" alt="Phoenix Boba Shop Logo" class="logo">
            <h1>Phoenix Boba Shop</h1>
        </div>
    </header>
    <!-- LOG IN STATUS MSG -->
    <p id="login-status" style="text-align: right; padding: 10px;"></p>


    <!-- GOOGLE AUTH CONNECTION -->
    <script>
        window.addEventListener('DOMContentLoaded', async () => {
    try {
        const res = await fetch('/auth/user');
        const { name, email } = await res.json();
        const { is_manager } = await fetch(`/employee/data/${email}`)
            .then((response) => response.json())
            .catch((err) => console.error('Error finding employee:', err));
        if (!is_manager) {
            alert('Unauthorized access!');
            window.location.href = '/';
        }
        const message =
            name === 'Guest' ? 'You are not logged in.' : `Logged in as: ${name}`;
        document.getElementById('login-status').textContent = message;
    } catch (err) {
        console.error('Failed to fetch user info:', err);
        document.getElementById('login-status').textContent =
            'Login status unknown.';
    }
});
    </script>
    <nav>
        <ul>
            <li><a href="delivery.html">Delivery</a></li>
            <li><a href="inventory.html">Count Inventory</a></li>
            <li><a href="reports.html">Reports</a></li>
            <li><a href="employees.html">Manage Employees</a></li>
            <li><a href="menuItems.html">Manage Menu</a></li>
            <li><a href="orders.html">Manage Orders</a></li>
            <li><a href="../">Log Out</a></li>
        </ul>
    </nav>
    <main>
        <h2>Reports</h2>
        <button id="generateXReportButton">Generate X Report</button>
        <button id="generateZReportButton">Generate Z Report</button>
        <div id="xReportContainer"></div>
        <div id="zReportContainer"></div>
    </main>
    <script type="module" src = "get-reports.js"></script>
</body>
</html>